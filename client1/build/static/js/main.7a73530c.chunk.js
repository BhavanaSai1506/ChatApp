(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{238:function(e,t,a){e.exports=a(416)},24:function(e,t,a){},243:function(e,t,a){},296:function(e,t){},416:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(23),l=a.n(s),o=(a(243),a(10)),c=a(11),i=a(13),m=a(12),u=a(14),d=a(418),h=a(419),p=(a(24),a(41)),g=a(25),f=a(29),E=a(21),b=(a(43),a(31)),v=a.n(b);var O=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){var t,n;e.preventDefault(),j(a.state)?(t=a.state.email,n=a.state.password,v.a.post("/login",{email:t,password:n})).then(function(e){console.log("login  responce ",e),localStorage.setItem("Sender",a.state.email),a.props.props.history.push("/dashboard")}).catch(function(e){console.log(e),Object(E.toast)("Login unsuccessful!!")}):Object(E.toast)("please enter all the feilds correctly",{position:E.toast.POSITION.BOTTOM_CENTER})},a.handleChange=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value,s=Object(f.a)({},a.state.formErrors);switch(n){case"email":s.email=w.test(r)?"":"invalid email address";break;case"password":s.password=r.length<6?"minimum 6 characaters required":""}a.setState(Object(g.a)({formErrors:s},n,r),function(){return console.log(a.state)})},a.registrationclick=function(e){e.preventDefault(),a.props.props.history.push("/register")},a.Onclick=function(e){e.preventDefault(),a.props.props.history.push("/forgetPassword")},a.state={email:null,password:null,formErrors:{email:"",password:""}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.formErrors;return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"form-wrapper"},r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0},r.a.createElement("div",{className:"email"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{className:e.email.length>0?"error":null,placeholder:"Email",type:"email",name:"email",noValidate:!0,onChange:this.handleChange}),e.email.length>0&&r.a.createElement("span",{className:"errorMessage"},e.email)),r.a.createElement("div",{className:"password"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{className:e.password.length>0?"error":null,placeholder:"Password",type:"password",name:"password",noValidate:!0,onChange:this.handleChange}),e.password.length>0&&r.a.createElement("span",{className:"errorMessage"},e.password)),r.a.createElement("div",{className:"createAccount"},r.a.createElement("button",{type:"submit",onClick:this.handleSubmit},"submit")),r.a.createElement("div",null,r.a.createElement("button",{class:"button1",onClick:this.registrationclick},"registration")),r.a.createElement("div",null)),r.a.createElement("small",null,r.a.createElement("a",{onClick:this.Onclick,href:"forgotpassword"}," forgot password"))),r.a.createElement(E.ToastContainer,null))}}]),t}(r.a.Component),w=RegExp(/^[a-zA-Z0-9.!#$%&\u2019*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/),j=function(e){var t=e.formErrors,a=Object(p.a)(e,["formErrors"]),n=!0;return Object.values(t).forEach(function(e){e.length>0&&(n=!1)}),Object.values(a).forEach(function(e){null===e&&(n=!1)}),n},N=O,y=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(N,{props:this.props}))}}]),t}(n.Component),S=RegExp(/^[a-zA-Z0-9.!#$%&\u2019*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/),C=function(e){var t=e.formErrors,a=Object(p.a)(e,["formErrors"]),n=!0;return Object.values(t).forEach(function(e){e.length>0&&(n=!1)}),Object.values(a).forEach(function(e){null===e&&(n=!1)}),n},k=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){var t,n,r,s;e.preventDefault(),C(a.state)?(t=a.state.firstName,n=a.state.lastName,r=a.state.email,s=a.state.password,v.a.post("/registration",{firstName:t,lastName:n,email:r,password:s})).then(function(e){console.log("reg page"),a.props.props.history.push("/login")}).catch(function(e){Object(E.toast)("user id is already exsists")}):Object(E.toast)("please enter all the feilds correctly")},a.handleChange=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value,s=Object(f.a)({},a.state.formErrors);switch(n){case"firstName":s.firstName=r.length<5?"minimum 5 characaters required":"";break;case"lastName":s.lastName=r.length<5?"minimum 5 characaters required":"";break;case"email":s.email=S.test(r)?"":"invalid email address";break;case"password":s.password=r.length<6?"minimum 6 characaters required":""}a.setState(Object(g.a)({formErrors:s},n,r),function(){return console.log(a.state)})},a.registrationclick=function(e){e.preventDefault(),a.props.props.history.push("/login")},a.state={firstName:null,lastName:null,email:null,password:null,formErrors:{firstName:"",lastName:"",email:"",password:"",toast:!1}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.formErrors;return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"form-wrapper"},r.a.createElement("h1",null,"Registeration Form"),r.a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0},r.a.createElement("div",{className:"firstName"},r.a.createElement("label",{class:"labelOne",htmlFor:"firstName"},"First Name"),r.a.createElement("input",{className:e.firstName.length>0?"error":null,placeholder:"First Name",type:"text",name:"firstName",noValidate:!0,onChange:this.handleChange}),e.firstName.length>0&&r.a.createElement("span",{className:"errorMessage"},e.firstName)),r.a.createElement("div",{className:"lastName"},r.a.createElement("label",{class:"labelOne",htmlFor:"lastName"},"Last Name"),r.a.createElement("input",{className:e.lastName.length>0?"error":null,placeholder:"Last Name",type:"text",name:"lastName",noValidate:!0,onChange:this.handleChange}),e.lastName.length>0&&r.a.createElement("span",{className:"errorMessage"},e.lastName)),r.a.createElement("div",{className:"email"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{className:e.email.length>0?"error":null,placeholder:"Email",type:"email",name:"email",noValidate:!0,onChange:this.handleChange}),e.email.length>0&&r.a.createElement("span",{className:"errorMessage"},e.email)),r.a.createElement("div",{className:"password"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{className:e.password.length>0?"error":null,placeholder:"Password",type:"password",name:"password",noValidate:!0,onChange:this.handleChange}),e.password.length>0&&r.a.createElement("span",{className:"errorMessage"},e.password)),r.a.createElement("div",{className:"createAccount"},r.a.createElement("button",{type:"submit",title:"click on Submit",onClick:this.handleSubmit},"submit")),r.a.createElement("div",{className:"login"},r.a.createElement("button",{type:"submit",title:"click on Login",onClick:this.registrationclick},"login")))),r.a.createElement(E.ToastContainer,null))}}]),t}(r.a.Component),I=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"form"},r.a.createElement(k,{props:this.props}))}}]),t}(n.Component),A=a(48),M=a(65),D=a(63),R=a.n(D),F=a(47),V=a.n(F),P=a(64),T=a.n(P);var x=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.props.MsgArray.map(function(t){return r.a.createElement("div",null,t.recieverId===localStorage.getItem("Sender")&&t.senderId===e.props.recieverId?r.a.createElement("div",{className:"sender-div"},r.a.createElement("label",null,t.senderId,":"),r.a.createElement("div",null,t.message)):null,t.recieverId===e.props.recieverId?r.a.createElement("div",{className:"receiver-div"},r.a.createElement("label",null,t.senderId),r.a.createElement("div",null,t.message)):null)})}}]),t}(n.Component),z=a(156),L=a.n(z).a.connect("http://localhost:4000"),Z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleMessage=function(e){a.setState({message:e.target.value})},a.handleSubmit=function(e){e.preventDefault();var t=localStorage.getItem("Sender");a.setState({Sender:t}),console.log("Sender is :",t),console.log("Selected receiver: ",a.state.Receiver);var n={senderId:t,recieverId:a.state.Receiver,message:a.state.message};L.emit("new_msg",n),a.setState({message:"",anchorEl:null}),a.setState({MsgDisplay:a.state.message}),a.handleClick=a.handleClick.bind(Object(A.a)(Object(A.a)(a)))},a.handlelogout=function(e){e.preventDefault(),a.props.props.history.push("/loginPage")},a.handleClick=function(e,t){a.setState({anchorEl:null});var n=t.target.textContent;a.setState({Receiver:n})},a.state={onlineUser:[],MsgArray:[],message:"",MsgDisplay:"",Receiver:"",Sender:"",msg:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e,t=this;v()("/getAllUsers",{method:"GET",data:e}).then(function(e){t.setState({onlineUser:e.data.result}),console.log("users",e.data.result)}).catch(function(e){alert(e)}),function(e){return v()("/getAllChats",{method:"GET",data:e})}().then(function(e){t.setState({MsgArray:e.data.result}),console.log("chat history is :",t.state.MsgArray)}).catch(function(e){alert(e)});var a=localStorage.getItem("Sender");L.on(a,function(e){console.log("recieved data to services--\x3e",e);var a=t.state.msg;a.push(e),t.setState({msg:a}),console.log("this dot msg==========>",e),console.log("msg array=======>",t.state.msg)})}},{key:"render",value:function(){var e=this;console.log("Sender is :",this.state.Sender),console.log("Selected receiver: ",this.state.Receiver);var t=this.state.onlineUser.map(function(t){return console.log("  local data ",localStorage.getItem("Sender")),t.email===localStorage.getItem("Sender")||r.a.createElement(M.a,{onClick:function(a){return e.handleClick(t,a)}},t.email)}),a=this.state.msg.map(function(e){return r.a.createElement("div",null,r.a.createElement(M.a,null,e.senderId,":",e.message,"   "))});return r.a.createElement("div",null,r.a.createElement("div",{className:"root"},r.a.createElement(R.a,{position:"static"},r.a.createElement("h1",{id:"heading"},"chatapp "),r.a.createElement(V.a,{id:"buttonalter",onClick:this.handlelogout,color:"inherit"},"Logout"),r.a.createElement("p",{id:"loginas"},"login as  ",localStorage.getItem("Sender")))),r.a.createElement("div",{className:"div1"},r.a.createElement("label",null,"users"),r.a.createElement("div",null,t)),r.a.createElement("div",{className:"div2"},this.state.Receiver,a,r.a.createElement(x,{MsgArray:this.state.MsgArray,recieverId:this.state.Receiver})),r.a.createElement("div",null,r.a.createElement("form",{className:"container"},r.a.createElement(M.b,{id:" textfieldInput",className:"textField",margin:"normal",value:this.state.message,onChange:this.handleMessage}))),r.a.createElement("div",null,r.a.createElement(V.a,{variant:"contained",color:"primary",id:"dashsendButton"},r.a.createElement(T.a,{class:"senddashlabel",onClick:this.handleSubmit},"send"))))}}]),t}(r.a.Component),U=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Z,{props:this.props}))}}]),t}(n.Component),$=RegExp(/^[a-zA-Z0-9.!#$%&\u2019*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/),q=function(e){var t=e.formErrors,a=Object(p.a)(e,["formErrors"]),n=!0;return Object.values(t).forEach(function(e){e.length>0&&(n=!1)}),Object.values(a).forEach(function(e){null===e&&(n=!1)}),n},B=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){var t;e.preventDefault(),q(a.state)?(t=a.state.email,v.a.post("/verifyUser",{email:t}).then(function(e){console.log("Inside forgetPassword response is--",e.data);var t=e.data.substring(34);localStorage.setItem("verifyUserToken",t),Object(E.toast)(" plz check your email..")}).catch(function(e){console.log(e),Object(E.toast)("User Not Found..")}),console.log("\n        --SUBMITTING-\n    email ".concat(a.state.email,"\n      "))):Object(E.toast)("FORM INVALID - DISPLAY ERROR MESSAGE")},a.handleChange=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value,s=Object(f.a)({},a.state.formErrors);switch(n){case"email":s.email=$.test(r)?"":"invalid email address"}a.setState(Object(g.a)({formErrors:s},n,r),function(){return console.log(a.state)})},a.registrationclick=function(e){e.preventDefault(),window.location.href="register"},a.state={email:null,formErrors:{email:""}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.formErrors;return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"form-wrapperRecover"},r.a.createElement("h1",null,"Forget Password"),r.a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0},r.a.createElement("div",{className:"email"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{className:e.email.length>0?"error":null,placeholder:"Email",type:"email",name:"email",noValidate:!0,onChange:this.handleChange}),e.email.length>0&&r.a.createElement("span",{className:"errorMessage"},e.email)),r.a.createElement("div",{className:"createAccount"},r.a.createElement("button",{type:"submit",title:"click on Submit",onClick:this.handleSubmit},"submit")),r.a.createElement("div",{className:"login"},r.a.createElement("button",{class:"registerButton",type:"submit",title:"click on Login",onClick:this.registrationclick},"register")))),r.a.createElement(E.ToastContainer,null))}}]),t}(r.a.Component),_=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(B,null))}}]),t}(n.Component),G=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t,n,r=window.location.pathname,s=r.substr(15);console.log("resetpassComponent--Current url is--:",r),console.log("resetpassComponent--Token is--:",s),(t=a.state.password,n=s,v.a.post("/resetpassword/".concat(n),{password:t},{headers:{token:n}})).then(function(e){a.props.props.history.push("/login")}).catch(function(e){Object(E.toast)("plz try again")})},a.handleChange=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value,s=Object(f.a)({},a.state.formErrors);switch(n){case"password":s.password=r.length<6?"minimum 6 characaters required":"";break;case"password1":s.conformpassword=r.length<6?"minimum 6 characaters required":""}a.setState(Object(g.a)({formErrors:s},n,r),function(){return console.log(a.state)})},a.Onclick=function(e){e.preventDefault()},a.state={password:null,conformpassword:null,formErrors:{password:"",conformpassword:""}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.formErrors;return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"form-wrapperRecover"},r.a.createElement("h1",null,"Reset"),r.a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0},r.a.createElement("div",{className:"password"},r.a.createElement("label",{htmlFor:"password"},"new password"),r.a.createElement("input",{className:e.password.length>0?"error":null,placeholder:"password",type:"password",name:"password",noValidate:!0,onChange:this.handleChange}),e.password.length>0&&r.a.createElement("span",{className:"errorMessage"},e.password)),r.a.createElement("div",{className:"password"},r.a.createElement("label",{htmlFor:"password"},"conform passowrd"),r.a.createElement("input",{className:e.conformpassword.length>0?"error":null,placeholder:"Password",type:"password",name:"password1",noValidate:!0,onChange:this.handleChange}),e.conformpassword.length>0&&r.a.createElement("span",{className:"errorMessage"},e.conformpassword)),r.a.createElement("div",{className:"createAccount"},r.a.createElement("button",{type:"submit",onClick:this.handleSubmit},"submit")))))}}]),t}(r.a.Component),J=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"form"},r.a.createElement(G,{props:this.props}))}}]),t}(n.Component),W=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(d.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(h.a,{path:"/login",component:y}),r.a.createElement(h.a,{path:"/register",component:I}),r.a.createElement(h.a,{path:"/dashboard",component:U}),r.a.createElement(h.a,{path:"/forgetPassword",component:_}),r.a.createElement(h.a,{path:"/resetPassword",component:J}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[238,1,2]]]);
//# sourceMappingURL=main.7a73530c.chunk.js.map